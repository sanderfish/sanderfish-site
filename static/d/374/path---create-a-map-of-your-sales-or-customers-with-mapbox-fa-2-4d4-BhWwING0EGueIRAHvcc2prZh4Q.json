{"data":{"site":{"siteMetadata":{"title":"Sanderfish | Bootstrapper, Developer and Product Designer","author":"Sander Visser"}},"markdownRemark":{"id":"1d433136-7788-515a-ae54-584b33ba4a9e","excerpt":"When you sell digital or physical products online, people all over the world (or country) buy your products. I thought it would be fun to see where the people…","html":"<p>When you sell digital or physical products online, people all over the world (or country) buy your products. I thought it would be fun to see where the people that buy my products are from. Those type of maps work well as social proof – showing potential customers that you are a trusted business and have served customers globally.</p>\n<p>It gives visitors a real feel of how many customers you have and where they are located. You could possibly add the order amount or the product bought as well, to give a better indication of which products are possible.</p>\n<p>I’m going to make this map for my SaaS product <a href=\"https://checkoutpage.co\">Checkout Page</a>. My customers are people who “connect” their Stripe account to my service. I have exported their data and turned it into a CSV file. This will be the starting point of this tutorial.</p>\n<br />\n<br />\n<h2>1. Get your customer/sales data as a CSV file</h2>\n<p>Most e-commerce platforms offer ways to export your sales or customer data. Often this export will be in the CSV format, which you can open in Google Sheets, Numbers (Mac OS) or Microsoft Excel. Here are some links that should help you to get your initial export for a couple of platforms:</p>\n<ul>\n<li>\n<p>Shopify Orders <a href=\"https://help.shopify.com/en/manual/orders/export-orders\">https://help.shopify.com/en/manual/orders/export-orders</a></p>\n</li>\n<li>\n<p>Shopify Customers <a href=\"https://help.shopify.com/en/manual/customers/import-export-customers\">https://help.shopify.com/en/manual/customers/import-export-customers</a></p>\n</li>\n<li>\n<p>Etsy Orders <a href=\"https://help.etsy.com/hc/en-gb/articles/360000343328-Downloading-a-Spreadsheet-of-Your-Sold-Transactions\">https://help.etsy.com/hc/en-gb/articles/360000343328-Downloading-a-Spreadsheet-of-Your-Sold-Transactions</a></p>\n</li>\n<li>\n<p>Stripe - Stripe payments and customers exports don’t include Billing or Shipping addresses. It is however possible to get these via the API as JSON as explained here <a href=\"https://stripe.com/docs/api/charges/list\">https://stripe.com/docs/api/charges/list</a>. I use the following code to save my customers to a json file, which I then convert to a CSV file via <a href=\"https://konklone.io/json/\">https://konklone.io/json/</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl https://api.stripe.com/v1/customers?limit=9999 \\\n-u [YOUR_API_KEY]: \\\n-G \\\n-o data.json</code></pre></div>\n</li>\n<li>\n<p>WooCommerce <a href=\"https://docs.woocommerce.com/document/ordercustomer-csv-export/\">https://docs.woocommerce.com/document/ordercustomer-csv-export/</a></p>\n</li>\n<li>\n<p>SquareSpace <a href=\"https://support.squarespace.com/hc/en-us/articles/206540677-Exporting-orders\">https://support.squarespace.com/hc/en-us/articles/206540677-Exporting-orders</a></p>\n</li>\n<li>\n<p>Wix <a href=\"https://support.wix.com/en/article/exporting-orders-in-wix-stores\">https://support.wix.com/en/article/exporting-orders-in-wix-stores</a></p>\n</li>\n<li>\n<p>BigCommerce <a href=\"https://support.bigcommerce.com/s/article/Importing-Exporting-Orders\">https://support.bigcommerce.com/s/article/Importing-Exporting-Orders</a></p>\n</li>\n</ul>\n<br />\n<br />\n<h2>2. Get coordinates from your addresses</h2>\n<p>To put the addresses of your orders or customers on a map, they need to be converted to coordinates. The most accurate way to do this is by using the Google Maps API, but I didn’t want to code. I found <a href=\"https://geocode.localfocus.nl/\">a geocoding service</a> that geocodes address data and returns it in CSV format. It sometimes returns a lot of options when using the ‘worldwide’ setting, meaning you will have to check which address is the correct one.</p>\n<p>Open up the CSV file you exported in step 1 in a spreadsheet editor (I use Google Sheets). To improve the accuracy of the geocoding tool it’s best to organise your data in readable addresses. I aligned my columns like this:</p>\n<table>\n<thead>\n<tr>\n<th>Address</th>\n<th>Postcode</th>\n<th>City</th>\n<th>Country</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>…</td>\n<td>…</td>\n<td>…</td>\n<td>…</td>\n</tr>\n<tr>\n<td>…</td>\n<td>…</td>\n<td>…</td>\n<td>…</td>\n</tr>\n</tbody>\n</table>\n<p>This allowed me to copy them into the geocoder easily and is also helpful to paste the results back in.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fbfdaa203882b8a7534e447ccd5d326f/3c2f0/geocoding-addresses.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 69.16488222698072%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1UlEQVQ4y41S227UMBDtxyGhChB9QYgXfgZxlxBIfAxqqSjiG5AQ4qUtm+xunDh2YudiZ4aZ2Wy6m1KopZMZz4xP5naAdABgwvbs6pNtJ/aab7Qd8KfvOiy1htVyCcliAVmWiVyvVnBxfg5KKViv17BMU7YhI00STBYJpmmCHb3fkgphiAP6poPat1BoA1XtSW/AWAeWdNe04qtdw6DYlu1INkKzl7EQxmEA63ss6w6N61FXregslWnI1gk2tk5iqyaIv6iavZYJ4TAMWFkDpS6ApTWlSIarK6grC7W14s9VhkplFGMwhkB1DhhjnDARmrKEjPpU5Dk9UtJPvq+oj0VRgHMOQgjQ9T31rGd9k9VsOFtCysYKCZPpIpcByBA2pJSVQmutxM6nOy8ZOEPnaiIqwBgu2YheUtZaa+QMM/oR3733I8/V+lwfSowwjOmzbxN8tXfjCt6Y1V+GEuePYIZbn3EPI+bWQ2Y8KLMveS1CiDK43WneBCH8fqnxzrNP+OD1Z7z7/BjvvTzBwxfHeP/Vidh/JiWO+/rPcqeSf/zWePT2FJ98+IqP3n3Bpx+/4eP3Z3J/+OYUfy2NEA4AtyuZmZs+omsD+i5gPUq+t2Tfneb/8AeoEDNUkBilEwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Geocoding addresses with https://geocode.localfocus.nl\"\n        title=\"\"\n        src=\"/static/fbfdaa203882b8a7534e447ccd5d326f/fb8a0/geocoding-addresses.png\"\n        srcset=\"/static/fbfdaa203882b8a7534e447ccd5d326f/1a291/geocoding-addresses.png 148w,\n/static/fbfdaa203882b8a7534e447ccd5d326f/2bc4a/geocoding-addresses.png 295w,\n/static/fbfdaa203882b8a7534e447ccd5d326f/fb8a0/geocoding-addresses.png 590w,\n/static/fbfdaa203882b8a7534e447ccd5d326f/526de/geocoding-addresses.png 885w,\n/static/fbfdaa203882b8a7534e447ccd5d326f/3c2f0/geocoding-addresses.png 934w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Once geocoded, you scroll down to the results and copy them. Go back to the CSV file and add two columns to the right of the <code class=\"language-text\">country</code> column: <code class=\"language-text\">latitude</code> and <code class=\"language-text\">longitude</code>. To prevent overwriting the original data, I created a new tab/spreadsheet in Google Sheets, where I pasted the results. I then selected all the <code class=\"language-text\">latitude</code> and <code class=\"language-text\">longitude</code> items and copied them to my clipboard. I then went back to the customer data spreadsheets and pasted the coordinate date in the <code class=\"language-text\">latitude</code> and <code class=\"language-text\">longitude</code> columns.</p>\n<br />\n<br />\n<h2>3. Export to CSV</h2>\n<p>You now want to export your data to a CSV file. Mapbox has some restrictions on what it can read. If you’re running into issues, this document might help: <a href=\"https://www.mapbox.com/help/troubleshoot-csv/\">https://www.mapbox.com/help/troubleshoot-csv/</a>.</p>\n<p>A few gotchas:</p>\n<ul>\n<li>Some spreadsheet editors export all empty rows and unnamed columns. It can be worth removing the unused rows at the bottom and right of your data.</li>\n<li>Make sure your exported files contains Comma Separated Values and now Semicolon Separated Values. Mapbox only accepts the former.</li>\n</ul>\n<br />\n<br />\n<h2>4. Upload dataset to Mapbox</h2>\n<p>We’ll use Mapbox to create the map. Mapbox offers some really nice map styles and you’re able to customise them as well. If you don’t have a Mapbox account yet, create one here <a href=\"https://www.mapbox.com/signup/\">https://www.mapbox.com/signup/</a>.</p>\n<p>To be able to map your data on a map in Mapbox, you need to add it as a dataset. Let’s go to <a href=\"https://www.mapbox.com/studio/datasets/\">Datasets</a> in the studio dashboard to add it. Press the <code class=\"language-text\">New dataset</code> button, click the <code class=\"language-text\">upload</code> tab and upload your CSV file. Press confirm, give your dataset a name, click <code class=\"language-text\">Create</code> and click <code class=\"language-text\">Start editing</code>. You should be able to see your datapoints on a map now.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a12a14247b7781ff7407271fceb97b3a/1767f/mapbox-dataset-customers.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 61.10491071428571%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACsklEQVQoz12S208TQRTG92/Sd3mAtiSFcKfbAi33lm67QCm0myYafJL4IkZAEKS0NJEEEx9QH+BJffFBEwkmXIwWexG5tJQtWDrbPZ4zQqNu8mXOzM75zTnfjLDzebPy6OT4eS6Xj57m1OXkwXFsP3UY+54+4kqgUgcnsdTPDB+TP07+zFHpw2zs4Og0tvctGdna3Xvx8dNmpfD+w5bvWGWQPDwD9bwAS5FlWFgMw+zcPDyamoGZx3OoWZhGLYYjEF6K4p4oH5/ML+CeaXjz9h1s76vwcOqpX/jydV+6uCxB7rxQUNU86+/vZ6JoYVZRZBaLhdntdtbW1oayMZfTyRw4J1mtVlZbW8sqKm6xZysrv1gJ4N7Efa8Qj8c9OgCo+Qstk8nqHo8HEARNTU2AIOjp6YGBgQEYHBwEr9cL7e3t/F9DQwM0NzeD0WjAaiNFRMDk5ANZ2N7Z9eTUC8jmzrRMNquPjY3xZKyAJ4miCHSIz+cDp9PJgbTW0tLChVXC+Pjd4stXrylPFhKJhIfopVJJU1VVDwQCHIitgw0rdEsSh9Eatg+dnZ18JHBrayvYbDaQJKnoGxmBjo4OWUin0xyIn5bP53W/388rum6xu7sb+vr6eEwwqsrhcIAsy+ByubiGhoaKwWAQurq6ZCGVSv0DHB0d5ckExI28GvKM1oaHh7kV5CvFJPIXDyhS3v9AdgXUEcaFQL23t1fHCnVsW0eAjgC6uPJ/t9ut4wFFsoUDsWXpCniJQIYta1iNhglcCCjH2KaGEK7rNYrxoAJdJlbqpQp98NcXCoX4JZCXJIqv5yNoPMVkBYlsIS/Jc8pDj/3C6urqjfX19dsbGxuBtbW1IN6UUl9fr+CTURobGxV8FkpdXV05NpvNislkUoxGI5fBYAhWVVUFampq7lRXV9/8DfvLYg5mcTMqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Mapbox customers dataset\"\n        title=\"\"\n        src=\"/static/a12a14247b7781ff7407271fceb97b3a/fb8a0/mapbox-dataset-customers.png\"\n        srcset=\"/static/a12a14247b7781ff7407271fceb97b3a/1a291/mapbox-dataset-customers.png 148w,\n/static/a12a14247b7781ff7407271fceb97b3a/2bc4a/mapbox-dataset-customers.png 295w,\n/static/a12a14247b7781ff7407271fceb97b3a/fb8a0/mapbox-dataset-customers.png 590w,\n/static/a12a14247b7781ff7407271fceb97b3a/526de/mapbox-dataset-customers.png 885w,\n/static/a12a14247b7781ff7407271fceb97b3a/fa2eb/mapbox-dataset-customers.png 1180w,\n/static/a12a14247b7781ff7407271fceb97b3a/08f6a/mapbox-dataset-customers.png 1770w,\n/static/a12a14247b7781ff7407271fceb97b3a/1767f/mapbox-dataset-customers.png 3584w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<br />\n<br />\n<h2>5. Convert data to a Tileset</h2>\n<p>To use the Dataset in the Styles editor, it needs to be converted to a Tileset. Go to <a href=\"https://www.mapbox.com/studio/tilesets/\">Tilesets</a> and click <code class=\"language-text\">New tileset</code>. Press the <code class=\"language-text\">Create from dataset</code> tab, select the dataset you just created in step 4 and export it to a tileset.</p>\n<br />\n<br />\n<h2>6. Add your data to a map</h2>\n<p>This is the fun part! We can finally design and create the map. Go to <a href=\"https://www.mapbox.com/studio/\">Styles</a> and create a new Style. You can start with the Basic style, use a template or upload a style yourself. I chose Light as it matches the design of <a href=\"checkoutpage.co\">checkoutpage.co</a>, where I will use the map.</p>\n<p>Now press the <code class=\"language-text\">Add layer</code> button and add your dataset to the list of active sources. You should now see your data appear on the map! You can click the Type tab to change the looks of your data. This also allows you to use a value from the dataset you’ve uploaded, such as the total order amount. Once you’ve added your layer you can select it and change the way it looks, the positioning, et cetera. I’m going for the icon of a bag and because I don’t have so many items mapped out, I’ll make the icon a bit larger.</p>\n<br />\n<br />\n<h2>7. Use your map</h2>\n<p>I simply wanted an image, so I’m making a screenshot from the map. If you want to print the map or some reason, there’s a print option in the top right corner. This is however <a href=\"https://www.mapbox.com/help/how-static-maps-work/\">limited to 5 prints</a>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/02eb6073c8af7f6355568e30230f6909/1d8e7/mapbox-map-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.03027754415476%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGklEQVQ4y21T2ZLaQAyc//+opLY2AS+3DcbHcngx2NjYXEmW5EnpVtnLkOxDl+ZSS2ppTM+byovrCS3hNGtn4sokCKS9/wytj81h7MMuSOL1WsrqIG+7rVx/XHRP8v50pm9o7b3CvXM8EE7mgaR5poS32y/58/tdFkmi0eevr9LHm+HM1z2zH/lzJbc5DC+/j8b6gNmsNhuZxbHsy0Ju7z8lWC41c61g7CoJSZM0lTTbydD39awznii5iVdredtuFTlI8mIv4WolCfaX61nGeEzCCGchyGmz/V6u14tcLmep61oOjUTBYimGkepjLefzSbHGnpnS2Ysi6OMp6QYB6EwSkh3hczod1aeqKynKUuaLhRgVGU5pluHxCdFz2ReFeGGEEidaagj9MmjLTBi8BgHJWlJK1G+aaqgfHclOwoIlY01tvw1HSrhEYxZrSpMikwJElb4lGaUaIKmPsbG7RKcA2bQjRLC7VziXh1JyZM/St2gGiXd5LoPZnYzW2INJsGPLBMRNli66n6DzFcolITtMjIBpEKrG9pCbf6edSNGxM8qhDBwHnlFDEre/qA0esXlheC+Ziw50bA84a3y0Q5PYMGpMAsrhR7FmRCkYyAURm8RGPmjYZkFwH2PWGL3bDKtj3f33l2EH/JLN2gyoCZxpW3jIxN5/hv7U1woU1rn52nXkAZ2uPDkvii9Y22jvaJ97PaCvVs8a/7+WpR55YexuuAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Mapbox customer map result\"\n        title=\"\"\n        src=\"/static/02eb6073c8af7f6355568e30230f6909/fb8a0/mapbox-map-result.png\"\n        srcset=\"/static/02eb6073c8af7f6355568e30230f6909/1a291/mapbox-map-result.png 148w,\n/static/02eb6073c8af7f6355568e30230f6909/2bc4a/mapbox-map-result.png 295w,\n/static/02eb6073c8af7f6355568e30230f6909/fb8a0/mapbox-map-result.png 590w,\n/static/02eb6073c8af7f6355568e30230f6909/526de/mapbox-map-result.png 885w,\n/static/02eb6073c8af7f6355568e30230f6909/fa2eb/mapbox-map-result.png 1180w,\n/static/02eb6073c8af7f6355568e30230f6909/08f6a/mapbox-map-result.png 1770w,\n/static/02eb6073c8af7f6355568e30230f6909/1d8e7/mapbox-map-result.png 2378w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>You can also embed your map interactively on your website. To do this, click <code class=\"language-text\">Share</code> and then <code class=\"language-text\">Use</code>. This will show some code you can copy and paste into your website to embed the map itself.</p>\n<h2>No time to do all this?</h2>\n<p>This process takes quite some time, which is annoying. Especially if you want to make a new map next month, or next year. I’m working on a tool that automates most of the process. It’s working, but I haven’t built the interface yet. Want to hear more? Leave your email below. If you want your map <strong>now</strong>, you can pay me $25, send your raw data and I’ll turn it into a map for you, using the tool I’ve built.</p>\n<hr>\n<div id=\"mc_embed_signup\">\n<form action=\"https://sanderfish.us15.list-manage.com/subscribe/post?u=623bafe9c5e3900424bab0840&amp;id=67448ab113\" method=\"post\" id=\"mc-embedded-subscribe-form\" name=\"mc-embedded-subscribe-form\" class=\"validate\" target=\"_blank\" novalidate>\n    <div id=\"mc_embed_signup_scroll\">\n<div class=\"mc-field-group\">\n  Keep me posted on the progress of the tool!\n  <br />\n\t<input type=\"email\" value=\"\" name=\"EMAIL\" class=\"required email\" id=\"mce-EMAIL\" placeholder=\"Email address\" style=\"margin: 0.5em 0; padding: 0.5em 1em;\">\n  <input type=\"submit\" value=\"Subscribe\" name=\"subscribe\" id=\"mc-embedded-subscribe\" class=\"button\" style=\"padding: 0.5em 1em; background: black; color: white; border: none;\">\n</div>\n\t<div id=\"mce-responses\" class=\"clear\">\n\t\t<div class=\"response\" id=\"mce-error-response\" style=\"display:none\"></div>\n\t\t<div class=\"response\" id=\"mce-success-response\" style=\"display:none\"></div>\n\t</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->\n    <div style=\"position: absolute; left: -5000px;\" aria-hidden=\"true\"><input type=\"text\" name=\"b_623bafe9c5e3900424bab0840_67448ab113\" tabindex=\"-1\" value=\"\"></div>\n    </div>\n</form>\n</div>\n \n---","frontmatter":{"title":"Create a map of your sales or customers with Mapbox","date":"January 04, 2019"}}},"pageContext":{"slug":"/create-a-map-of-your-sales-or-customers-with-mapbox/","previous":{"fields":{"slug":"/create-a-map-of-your-sales-or-customers-with-mapbox/"},"frontmatter":{"title":"Create a map of your sales or customers with Mapbox"}},"next":null}}